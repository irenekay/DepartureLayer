/*!build time : 2014-07-07 3:24:14 PM*/
KISSY.add("gallery/DepartureLayer/1.0/store",function(){function a(){return b?b:(b=e.body.appendChild(e.createElement("div")),b.style.display="none",b.addBehavior("#default#userData"),b.load(f),b)}var b,c={},d=window,e=d.document,f="localStorage",g="globalStorage";return c.set=function(){},c.get=function(){},c.remove=function(){},c.clear=function(){},f in d&&d[f]?(b=d[f],c.set=function(a,c){b.setItem(a,c)},c.get=function(a){return b.getItem(a)},c.remove=function(a){b.removeItem(a)},c.clear=function(){b.clear()}):g in d&&d[g]?(b=d[g][d.location.hostname],c.set=function(a,c){b[a]=c},c.get=function(a){return b[a]&&b[a].value},c.remove=function(a){delete b[a]},c.clear=function(){for(var a in b)delete b[a]}):e.documentElement.addBehavior&&(c.set=function(b,c){var d=a();d.setAttribute(b,c),d.save(f)},c.get=function(b){var c=a();return c.getAttribute(b)},c.remove=function(b){var c=a();c.removeAttribute(b),c.save(f)},c.clear=function(){var b=a(),c=b.XMLDocument.documentElement.attributes;b.load(f);for(var d,e=0;d=c[e];e++)b.removeAttribute(d.name);b.save(f)}),c}),KISSY.add("gallery/DepartureLayer/1.0/index",function(a,b,c,d,e){function f(a){var b=this;if(!(b instanceof f))return new f(a);var c=b._mymix(f.ATTRS,a);f.superclass.constructor.call(b,c)}var g=a.all,h=a.DOM,i=6048e5;return a.extend(f,a.Base),f.VERSION=1,f.ATTRS={browser:{value:[{browser:"ie",version:"10"}],setter:function(a){return a}},intervalTime:{value:i,setter:function(a){return a}},layer:{value:{tip:"\u5176\u5b9e...\u4eb2\u6709\u66f4\u597d\u7684\u9009\u62e9",btn_type_pic:"http://gtms04.alicdn.com/tps/i4/TB1kLVqFVXXXXX1XpXXJPIyFpXX-143-56.png",imgsrc:["http://gtms01.alicdn.com/tps/i1/TB1UpxsFVXXXXbIXXXXIXul4XXX-860-342.png","http://gtms02.alicdn.com/tps/i2/TB1d9prFVXXXXc1XXXXl0Cl4XXX-860-343.png","http://gtms03.alicdn.com/tps/i3/TB1OORrFVXXXXcbXXXXIXul4XXX-860-342.png"]},setter:function(a){return a}},toptipBar:{value:{enable:!0,toptip_text:"\u4eb2\uff0c\u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\u5bfc\u81f4\u56fe\u7247\u6253\u5f00\u901f\u5ea6\u8fc7\u6162\uff0c\u63d0\u5347\u6253\u5f00\u901f\u5ea6\u60a8\u53ef\u4ee5\uff1a",toptip_btn_text:"\u5347\u7ea7\u6d4f\u89c8\u5668"},setter:function(a){return a}},updateLink:{value:"http://windows.microsoft.com/zh-cn/internet-explorer/download-ie",setter:function(a){return a}}},a.augment(f,{show:function(){var a=this;a._uaTest(e)},render:function(b){var c=this,e=c._getHtml(b);if("err"!=e){var f=g(e);if(f.prependTo("body"),1==b.get("tipBar")&&!c._promptIE(b)){var i=a.get("#pupUplayer_tipel");h.show(i);var j=new d(i,{height:45},.3,"easeOut");return j.run()}a.use("gallery/slide/1.3/index",function(a,e){C=new e("slides",{autoSlide:!1,hoverStop:!0,effect:"hSlide",timeout:2e3,speed:300,invisibleStop:!0,eventType:"click",triggerDelay:200,defaultTab:0,selectedClass:"current",carousel:!0,touchmove:!0}).on("afterSwitch",function(){}),a.ready(function(){h.style("#down","height",h.docHeight());var a=(h.viewportHeight(),h.viewportHeight()/2-266);h.style("#container","marginTop",a+"px")}),a.all("#pupUplayer").delegate("click","#J_pre",function(a){a.halt(),C.previous(),C.autoSlide&&C.stoped===!1&&C.stop().play()}),a.all("#pupUplayer").delegate("click","#J_next",function(a){a.halt(),C.next(),C.autoSlide&&C.stoped===!1&&C.stop().play()}),a.all("#pupUplayer").delegate("mouseenter","#closebtn",function(){h.style("#down-close","visibility","visible")}),a.all("#pupUplayer").delegate("mouseleave","#down-close",function(){h.style("#down-close","visibility","hidden")}),a.all("#pupUplayer").delegate("click","#down_close_btn",function(){if(b.set("timeStamp",(new Date).getTime()),h.style("#pupUplayer","display","none"),1==c.get("toptipBar").enable){b.set("tipBar",1);var e=a.get("#pupUplayer_tipel");h.show(e);var f=new d(e,{height:45},.3,"easeOut");return f.run()}})})}},_getHtml:function(a){var b=this,c=b.get("layer").imgsrc.length;if(3>c||c>5)return alert("\u8f6e\u64ad\u6570\u91cf\u5efa\u8bae\u57283-5\u5f20"),"err";for(var d="",e="",f=0;c>f;f++)d=d+'<div class="tab-pannel">										<a href="#"><img src="'+b.get("layer").imgsrc[f]+'"></a>									</div>',e+='<li><a href="javascript:void(0);"></a></li>';var g='<div class="browser-updator" id="pupUplayer_tipel" style="display:none;">		        <div class="browser-updator-wrapper">		          <p>		            <span>'+b.get("toptipBar").toptip_text+'</span>		            <a target="_blank" href="'+b.get("updateLink")+'" class="browser-updator-browser browser-updator-ie">		            <span>'+b.get("toptipBar").toptip_btn_text+"</span></a>		          </p>		        </div>		        </div>",h=g+'<div id="pupUplayer">					<div id="container">						<div id="explaSlide">							<div id="slides">								<div class="slides_container tab-content" id="slideinsert1">'+d+'</div>								<a href="javascript:void(0);" class="prev" id="J_pre">									<span>&lt;</span>								</a>								<a href="javascript:void(0);" class="next" id="J_next">									<span>&gt;</span>								</a>								<ul class="tab-nav pagination">'+e+'</ul>							</div>							<div class="close-btn">								<a href="javascript:void(0);">									<span id="closebtn">\xd7</span>								</a>							</div>							<div id="down-close">								<img src="http://gtms04.alicdn.com/tps/i4/TB1cnFlFVXXXXbaXVXX6ef0HXXX-202-29.png" />								<img src="http://gtms01.alicdn.com/tps/i1/TB1l18oFVXXXXaNXpXXnU4yFVXX-26-29.png"  id="down_close_btn"/>							</div>						</div>						<div class="explaChoice">							<img src="http://gtms01.alicdn.com/tps/i1/TB1nDdnFVXXXXXLXpXXBsd24XXX-860-158.jpg" width="860px" height="158px" alt="More choices.." />							<a href="'+b.get("updateLink")+'" target="_blank">								<img src="'+b.get("layer").btn_type_pic+'" id="layer_btn_type"/>								<span>'+b.get("layer").tip+'</span>							</a>						</div>					</div>					<div id="down"></div>				<div>';return b._promptIE(a)?h:1==a.get("tipBar")?g:void 0},_find:function(a,b,d){var e=this;switch(b){case"chrome":if(c.chrome<=d&&(e._promptIE(a)||1==a.get("tipBar")))return!0;break;case"safari":if(c.safari<=d&&(e._promptIE(a)||1==a.get("tipBar")))return!0;break;case"opera":if(c.opera<=d&&(e._promptIE(a)||1==a.get("tipBar")))return!0;break;case"firefox":if(c.firefox<=d&&(e._promptIE(a)||1==a.get("tipBar")))return!0;break;case"ie":if(c.ie<=d&&(e._promptIE(a)||1==a.get("tipBar")))return!0;break;default:return!1}},_uaTest:function(a){for(var b=this,c=b.get("browser").length,d=0;!b._find(a,b.get("browser")[d].browser,b.get("browser")[d].version)&&(d++,d!=c););c>d&&b.render(a)},_promptIE:function(a){var b=this,c=a.get("timeStamp"),d=(new Date).getTime()-parseInt(c,10)>b.get("intervalTime");return!c||d?!0:!1},_mymix:function(b,c){var d=["browser","toptipBar","intervalTime","layer","updateLink"];if(!c)return c=b;for(var e=0;e<d.length;e++)c[d[e]]||(c[d[e]]=b[d[e]].value);return c.toptipBar=a.mix(c.toptipBar,b.toptipBar.value,!1),c.layer=a.mix(c.layer,b.layer.value,!1),c}}),f},{requires:["core","ua","anim","./store"]}),KISSY.add("gallery/DepartureLayer/1.0/mini",function(a,b){return b},{requires:["./index"]});